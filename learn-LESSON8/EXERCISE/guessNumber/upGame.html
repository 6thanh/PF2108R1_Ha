<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEARN: LESSON 8- EXERSICE (Game đoán số)</title>
</head>

<body>
    <h1>Game đoán số</h1>
    <button id="guessNumber">Đoán số</button>


    <script>
        let maxNumber;
        let testMaxNumber;

        document.getElementById('guessNumber').addEventListener('click', function () {
            maxNumber = prompt('Số lớn nhất (số nguyên dương hoặc nguyên âm):');
            testMaxNumber = parseInt(maxNumber);
            while (isNaN(maxNumber) || testMaxNumber != maxNumber || maxNumber == null) {
                alert("Hãy nhập vào một số nguyên dương hoặc nguyên âm");
                maxNumber = prompt('Số lớn nhất:');
                testMaxNumber = parseInt(maxNumber);
            };
            while (testMaxNumber == 0) {
                alert("Hãy nhập số khác 0")
                maxNumber = prompt('Số lớn nhất:');
                testMaxNumber = parseInt(maxNumber);
            }
            if (testMaxNumber > 0) {
                guessInteger()
            } else {
                guessNegativeInteger();
            }

        });

        function guessInteger() {
            let minNumber = prompt('Số nhỏ nhất: ');
            let testMinNumber = parseInt(minNumber);
            while (isNaN(minNumber) || testMinNumber != minNumber || minNumber == null || testMinNumber >=
                testMaxNumber || testMinNumber < 0) {
                alert("Hãy nhập vào một số nguyên dương nhỏ hơn " + testMaxNumber);
                minNumber = prompt('Số nhỏ nhất:');
                testMinNumber = parseInt(minNumber);

                if (testMinNumber >= testMaxNumber) {
                    alert("Hãy nhập vào số nhỏ hơn " + testMaxNumber);
                    minNumber = prompt('Số nhỏ nhất:');
                    testMinNumber = parseInt(minNumber);
                }
                if (testMinNumber < 0) {
                    alert("Hãy nhập vào một số lớn hơn 0");
                    minNumber = prompt('Số nhỏ nhất:');
                    testMinNumber = parseInt(minNumber);
                }

            }
            let checkNumber = Math.floor(Math.random() * testMaxNumber);
            let chooseNumber;
            let testChooseNumber;
            let j = 1;
            while (checkNumber < testMinNumber) {
                checkNumber = Math.floor(Math.random() * testMaxNumber);
            }

            console.log(checkNumber);

            do {
                chooseNumber = prompt('Hãy đoán một số từ ' + minNumber + ' đến ' + maxNumber +
                    ' (lần thứ ' + j + ')');
                testChooseNumber = parseInt(chooseNumber);
                while (isNaN(chooseNumber) || testChooseNumber != chooseNumber || testChooseNumber >
                    testMaxNumber || testChooseNumber <
                    testMinNumber || chooseNumber == null) {
                    alert('Hãy đoán một số trong khoảng từ ' + minNumber + ' đến ' + maxNumber);
                    chooseNumber = prompt('Hãy đoán một số từ ' + minNumber + ' đến ' + maxNumber +
                        ' (lần thứ ' + j + ')');
                    testChooseNumber = parseInt(chooseNumber);
                }
                if (testChooseNumber == checkNumber) {
                    alert('Chúc mừng, bạn đã đoán đúng!');
                    break;
                }
                if (j == 3) {
                    alert('Bạn đã đoán sai 3 lần');
                    break;
                }
                j++;
            } while (j <= 3)
            console.log(j);
        };

        function guessNegativeInteger() {

            let minInteger = prompt('Số nhỏ nhất: ');
            let testMinInteger = parseInt(minInteger);
            while (isNaN(minInteger) || testMinInteger != minInteger || minInteger == null || testMinInteger >=
                testMaxNumber || testMinInteger > 0) {
                alert("Hãy nhập vào một số nguyên âm nhỏ hơn " + testMaxNumber);
                minInteger = prompt('Số nhỏ nhất:');
                testMinInteger = parseInt(minInteger);
                if (testMinInteger >= testMaxNumber) {
                    alert("Hãy nhập vào số nhỏ hơn " + testMaxNumber);
                    minInteger = prompt('Số nhỏ nhất:');
                    testMinInteger = parseInt(minInteger);
                }
                if (testMinInteger > 0) {
                    alert("Hãy nhập vào một số lớn hơn 0");
                    minInteger = prompt('Số nhỏ nhất:');
                    testMinInteger = parseInt(minInteger);
                }


            }
            let checkInteger;
            let chooseInteger;
            let testChooseInteger;
            let i = 1;
            do {
                checkInteger = Math.floor(Math.random() * testMinInteger);
            } while (checkInteger > testMaxNumber)

            console.log(checkInteger);

            do {
                chooseInteger = prompt('Hãy đoán một số từ ' + minInteger + ' đến ' + maxNumber +
                    ' (lần thứ ' + i + ')');
                testChooseInteger = parseInt(chooseInteger);
                while (isNaN(chooseInteger) || testChooseInteger != chooseInteger || testChooseInteger >
                    testMaxNumber ||
                    testChooseInteger <
                    testMinInteger || chooseInteger == null) {
                    alert('Hãy đoán một số trong khoảng từ ' + minInteger + ' đến ' + maxNumber);
                    chooseInteger = prompt('Hãy đoán một số từ ' + minInteger + ' đến ' + maxNumber +
                        ' (lần thứ ' + i + ')');
                    testChooseInteger = parseInt(chooseInteger);
                }
                if (testChooseInteger == checkInteger) {
                    alert('Chúc mừng, bạn đã đoán đúng!');
                    break;
                }
                if (i == 3) {
                    alert('Bạn đã đoán sai 3 lần');
                    break;
                }
                i++;
            } while (i <= 3)
            console.log(i);
        };
    </script>
</body>

</html>